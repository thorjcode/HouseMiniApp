# 项目名：房产小程序
B站视频连接 https://www.bilibili.com/video/BV1PB4y1s7nX/?share_source=copy_web&vd_source=652b50647b3da3ba324d79d31cc81632
### 房产、租房类小程序
### 数据库---云开发
## 导入 配置过程

1. 打开微信开发者工具，导入项目；

2. 填写APPID；

3. 开通云开发环境（请参考官方文档）；
- 3.1. 修改 `app.js` 大约第9行的代码，如下：

```javascript
    wx.cloud.init({
        env: 'cloud1-4gxxxxxxxxxxxxx',//是云环境ID，不是AppId
    })
```
4. 点击`云开发`选择`数据库`新建以下数据库集合,一行为一个集合名；

```
    Collections //收藏表，权限：自定义：所有人可读写，（都为true）
    CompanyInfo //公司信息表，权限：自定义：所有人可读写，（都为true）
    HouseList //房源表，权限：自定义：所有人可读写，（都为true）
    UserList //用户表，权限：自定义：所有人可读写，（都为true）
    StaffList //员工表，权限：自定义：所有人可读写，（都为true）
    StoreInfo //门店信息表，权限：自定义：所有人可读写，（都为true）
    HomeBanner //首页轮播图，权限：自定义：所有人可读写，（都为true）
```
- 4-1 把首页轮播图素材上传到存储文件夹，然后在 ` HomeBanner` 表里添加记录(一张轮播图为一条记录)，字段：`banner`，(字段的值为图片的网址);
- 4-2 把门店素材上传到存储文件夹，然后在` StoreInfo ` 表里添加一条记录；背景图字段：` storebg` ，array类型；公司背景图字段： `culturebg `，array类型；门店logo字段： `storeLogo`，string类型；门店名字字段：` storeName`，string类型；店长名字段：` manager`，string类型；电话字段：` phoneNumber`，string类型;

5. 手动在云开发控制面板设置第一个初始的管理员信息，先在`我的`功能页面登录，然后去云开发-->数据库里 `UserList` 数据表里把` admin`改为：true，：

- 5-1  `level`字段为等级权限，值主要有：0 (普通用户)、1 (普通管理员，只有使用：管理自己的房源，发布房源，的权限)、2(超级管理员，有使用全部权限)；

6. 上传 `cloud` 文件夹下所有的云函数，上传时选择 `上传并部署：云端安装依赖(不上传node_modules)`；

7. 编译运行。


## 目录结构

```
|--|-- cloud 云函数文件夹
|--|--|--|-- AdminManage //添加管理员云函数
|--|--|--|-- getOpenid //云函数获取openid
|--|-- dist 组件文件夹(来源网络)
|--|-- house_app 小程序代码包
|--|--|--pages 主页面（主包）
|--|--|--|--略
|--|--|--Adminpackage 管理员后台（分包）
|--|--|--|--略
|--|--|--CalculatorPackage 房贷计算器（分包）（来源网络）
|--|--|--|--略
|--|--|--EchartsPackage 房价图表（分包）
|--|--|--|--略
|--|--|--housePackage 房源信息（分包）
|--|--|--|--略
|--|--|--StorePackage 门店信息（分包）
|--|--|--|--略
|--|--其他页面略
|--README.md  配置说明文档
```

## 功能演示--说明
### 首页功能
1. 轮播图
2. `新房`、`二手房`、`出租房`、`房价`、`计算器`、`门店`
3. 滚动公告栏
4. 推荐房源-->点击推荐房源-->房源详情页
### 新房、二手房、出租房，选项功能
1. 点击功能-->房源列表；点击列表房源-->房源详情
#### 房源详情页
1. 房源轮播图
2. 房源信息
3. 负责人信息，点击可拨打电话
4. 房源详情
5. 收藏房源（登录状态才能使用）、计算器，预约看房:电话预约，添加通讯录，复制电话号；
### 房价，选项功能
1. 点击功能-->房价图表；
### 计算器，选项功能
1. 点击功能-->计算器；
2. 商业贷款、公积金贷款、组合贷款
3. 点击开始计算-->等额本息、等额本金
### 门店
- 门店轮播图
- 门店信息
- 门店底部导航：`员工`、`简介`、`招聘`，`地址`
##### 员工
1. 员工列表
2. 长按员工卡片-->可拨打该员工电话
##### 简介
1. 公司轮播图
2. 公司简介信息
##### 招聘
1. 公司轮播图
2. 招聘信息
##### 地址
1. 公司/门店地址
2. 点击图标-->导航去该地址
### 个人中心
1. 登录功能，显示用户信息
2. 我的收藏-->收藏页面
3. 在线客服
4. 退出登录
#### 我的收藏
1. 我的收藏-->收藏页面
2. 点击收藏房源-->查看/删除

#### 管理后台（超级管理员、普通管理员）
##### `后台入口，连续点击头像5次-->判断是否为管理员，是管理员-->进入管理后台，不是管理员-->扫码添加管理员`
1. 后台页面：`管理房源`、`发布房源`、`发布租房`、`公司信息`、`编辑员工`、`管理员`；
2. - 2-1 点击`管理房源`-->待审核、已发布
   - 2-2 点击待审核卡片-->审核详情：审核、发布、删除
   - 2-3 点击已发布卡片-->已发布详情：删除
3. - 3-1 点击`发布房源/出租房`-->发布新房、二手房、出租房
   - 3-2 填写完整信息后点击确认提交，自动跳转到`房源管理`页面

4. - 4-1 点击`公司信息`-->公司介绍、首页滚动公告、招聘信息
   - 4-2 可任意修改任意一项
5. - 5-1 点击`编辑员工`-->添加员工、员工卡片
   - 5-2 添加员工-->填写员工信息-->确认添加
   - 5-3 长按员工卡片-->修改、删除
   - 5-3-1 修改-->修改员工页面-->修改完成自动跳转到员工列表
   - 5-3-2 删除-->自动删除员工信息和图片，并刷新员工列表
6. - 6-1 点击`管理员`-->添加管理员、管理员列表
   - 6-2 添加管理员-->获取二维码-->添加成功二维码失效
   - 6-3 长按卡片-->删除该管理员











